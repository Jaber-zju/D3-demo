{"ast":null,"code":"var _jsxFileName = \"/Volumes/Macintosh HD - \\u6570\\u636E/yu01/d3_ex/src/barChart.jsx\";\nimport React from 'react';\nimport * as d3 from 'd3';\nexport default class BarChart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.drawBar = () => {\n      // const xScale = d3.scaleLinear()\n      //   .domain([0, d3.max(this.state.dataset)])\n      //   .range([0, 500]);\n      let svg = d3.select(\"#box1\").append(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      let bars = svg.selectAll('rect').data(this.state.dataset).enter().append('rect');\n      bars.attr(\"x\", (d, i) => i * 40 + 40).attr('y', d => this.state.height - d * 4).attr('width', 30).attr(\"height\", d => d * 4).attr('fill', 'green').on(\"mouseover\", function (d, i) {\n        d3.select(this).transition().duration(1000).style(\"fill\", \"red\");\n      }).on(\"mouseout\", function (d, i) {\n        d3.select(this).transition().duration(1000).style(\"fill\", \"green\");\n      }); // .transition()\n      // .duration(1000)\n      // .delay(function(d,i){\n      //   return 50*i;\n      // })\n      // .attr('fill', 'blue')\n      //加标签\n\n      svg.selectAll('text').data(this.state.dataset).enter().append('text').text(d => d).attr(\"x\", (d, i) => i * 40 + 50).attr(\"y\", d => this.state.height - d * 4 - 6).attr('font-family', 'sans-serif').attr('font-size', '11px').attr('fill', 'blue');\n    };\n\n    this.drawAxis = () => {\n      console.log('axis');\n      const xScale = d3.scaleLinear().domain([0, d3.max(this.state.dataset)]).range([0, 500]);\n      let axis = d3.axisLeft(xScale);\n      d3.select(\"#box1\").append(\"svg\").attr(\"width\", 1440).attr(\"height\", 30).append(\"g\").attr(\"transform\", \"translate(0,30)\").call(axis);\n    };\n\n    this.state = {\n      dataset: [5, 10, 15, 20, 25, 30, 35],\n      count: 0,\n      width: 400,\n      height: 200\n    };\n  }\n\n  componentDidMount() {\n    this.drawAxis();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"box1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["/Volumes/Macintosh HD - 数据/yu01/d3_ex/src/barChart.jsx"],"names":["React","d3","BarChart","Component","constructor","props","drawBar","svg","select","append","attr","state","width","height","bars","selectAll","data","dataset","enter","d","i","on","transition","duration","style","text","drawAxis","console","log","xScale","scaleLinear","domain","max","range","axis","axisLeft","call","count","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3'\nexport default class BarChart extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      dataset: [ 5, 10, 15, 20, 25, 30, 35],\n      count: 0,\n      width: 400,\n      height: 200,\n\n    }\n  }\n  drawBar = () => {\n    // const xScale = d3.scaleLinear()\n    //   .domain([0, d3.max(this.state.dataset)])\n    //   .range([0, 500]);\n\n    let svg = d3.select(\"#box1\")\n      .append(\"svg\")\n      .attr(\"width\", this.state.width)\n      .attr(\"height\", this.state.height)\n\n    let bars = svg.selectAll('rect')\n      .data(this.state.dataset)\n      .enter()\n      .append('rect')\n\n    bars.attr(\"x\", (d, i) => i * 40 + 40)\n      .attr('y', d => this.state.height - d * 4)\n      .attr('width', 30)\n      .attr(\"height\", d => d * 4)\n      .attr('fill','green')\n      .on(\"mouseover\",function(d,i){\n        d3.select(this)\n          .transition()\n          .duration(1000)\n          .style(\"fill\",\"red\");\n      })\n      .on(\"mouseout\",function(d,i){\n        d3.select(this)\n          .transition()\n          .duration(1000)\n          .style(\"fill\",\"green\");\n      })\n      // .transition()\n      // .duration(1000)\n      // .delay(function(d,i){\n      //   return 50*i;\n      // })\n      // .attr('fill', 'blue')\n\n    //加标签\n    svg.selectAll('text')\n      .data(this.state.dataset)\n      .enter()\n      .append('text')\n      .text(d => d)\n      .attr(\"x\", (d,i) => i * 40 + 50)\n      .attr(\"y\",d => this.state.height-(d*4) - 6)\n      .attr('font-family','sans-serif')\n      .attr('font-size','11px')\n      .attr('fill','blue')\n  }\n\n  drawAxis = () => {\n    console.log('axis')\n    const xScale = d3.scaleLinear()\n      .domain([0, d3.max(this.state.dataset)])\n      .range([0, 500]);\n\n    let axis = d3.axisLeft(xScale)\n\n    d3.select(\"#box1\").append(\"svg\")\n      .attr(\"width\", 1440)\n      .attr(\"height\", 30)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(0,30)\")\n      .call(axis);\n  }\n\n  componentDidMount() {\n    this.drawAxis()\n\n\n  }\n\n\n  render() {\n\n    return (\n      <div id='box1'>\n      </div>\n    )\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}