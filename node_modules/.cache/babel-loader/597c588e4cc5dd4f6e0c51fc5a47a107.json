{"ast":null,"code":"var _jsxFileName = \"/Volumes/Macintosh HD - \\u6570\\u636E/yu01/d3_ex/src/force_chart.js\";\nimport React, { Component } from \"react\";\nimport * as d3 from 'd3';\n\nclass Force_chart extends Component {\n  constructor(props) {\n    super(props);\n    this.data = props.chartState;\n  }\n\n  drawForceChart(nodes, edges) {\n    const padding = this.data.padding;\n    const width = this.data.width;\n    const pieHeight = this.data.pieHeight;\n    const svg = d3.select(\"body\").append(\"svg\").attr(\"width\", width).attr(\"height\", pieHeight).style('padding-left', padding.left).style('padding-top', padding.top);\n    const force = d3.forceSimulation(nodes).force(\"charge\", [-200]).force(\"link\", edges).force(\"center\", d3.forceCenter()).force('linkDistance', 100);\n    const svg_edges = svg.selectAll(\"line\").data(edges).enter().append(\"line\").style(\"stroke\", \"#ccc\").style(\"stroke-width\", 1).on(\"mouseover\", function (d, i) {\n      d3.select(this).style(\"stroke\", \"grey\").style(\"stroke-width\", 3);\n    }).on(\"mouseout\", function (d, i) {\n      d3.select(this).style(\"stroke\", \"#ccc\").style(\"stroke-width\", 1);\n    });\n    const color = d3.schemeSet2;\n    const svg_nodes = svg.selectAll(\"circle\").data(nodes).enter().append(\"circle\").attr(\"r\", 10).style(\"fill\", function (d, i) {\n      return color[i];\n    }).call(force.drag); // .on('mouseover', d => showDetail(d))\n    // .on(\"mouseover\",function(d,i){\n    //   d3.select(this)\n    //     .attr(\"r\",'20px')\n    //   d3.select('#tooltip')\n    //     .classed('hidden', false)\n    //     .style('left', (d.x - 50))\n    //     .style('top', (d.y-40))\n    //     .select('#place').text(d.name)\n    // })\n    // // .on('mouseout', d => hideDetail())\n    // .on('mouseout', d => {\n    //   d3.select(this)\n    //     .attr(\"r\",'10px')  //鼠标移出时，设置圆点半径报错\n    //   d3.select('#tooltip').classed('hidden', true)\n    //     .select('#place').text()\n    // })\n\n    force.on(\"tick\", function () {\n      svg_edges.attr(\"x1\", function (d) {\n        return d.source.x;\n      });\n      svg_edges.attr(\"y1\", function (d) {\n        return d.source.y;\n      });\n      svg_edges.attr(\"x2\", function (d) {\n        return d.target.x;\n      });\n      svg_edges.attr(\"y2\", function (d) {\n        return d.target.y;\n      });\n      svg_nodes.attr(\"cx\", function (d) {\n        return d.x;\n      });\n      svg_nodes.attr(\"cy\", function (d) {\n        return d.y;\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.drawForceChart(this.data.forceNodes, this.data.forceEdges);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default Force_chart;","map":{"version":3,"sources":["/Volumes/Macintosh HD - 数据/yu01/d3_ex/src/force_chart.js"],"names":["React","Component","d3","Force_chart","constructor","props","data","chartState","drawForceChart","nodes","edges","padding","width","pieHeight","svg","select","append","attr","style","left","top","force","forceSimulation","forceCenter","svg_edges","selectAll","enter","on","d","i","color","schemeSet2","svg_nodes","call","drag","source","x","y","target","componentDidMount","forceNodes","forceEdges","render"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;;AAEA,MAAMC,WAAN,SAA0BF,SAA1B,CAAmC;AACjCG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,IAAL,GAAYD,KAAK,CAACE,UAAlB;AACD;;AAEDC,EAAAA,cAAc,CAAEC,KAAF,EAASC,KAAT,EAAgB;AAC5B,UAAMC,OAAO,GAAG,KAAKL,IAAL,CAAUK,OAA1B;AACA,UAAMC,KAAK,GAAG,KAAKN,IAAL,CAAUM,KAAxB;AACA,UAAMC,SAAS,GAAG,KAAKP,IAAL,CAAUO,SAA5B;AAEA,UAAMC,GAAG,GAAGZ,EAAE,CAACa,MAAH,CAAU,MAAV,EACTC,MADS,CACF,KADE,EAETC,IAFS,CAEJ,OAFI,EAEKL,KAFL,EAGTK,IAHS,CAGJ,QAHI,EAGMJ,SAHN,EAITK,KAJS,CAIH,cAJG,EAIaP,OAAO,CAACQ,IAJrB,EAKTD,KALS,CAKH,aALG,EAKYP,OAAO,CAACS,GALpB,CAAZ;AAOA,UAAMC,KAAK,GAAGnB,EAAE,CAACoB,eAAH,CAAmBb,KAAnB,EACGY,KADH,CACS,QADT,EACmB,CAAC,CAAC,GAAF,CADnB,EAEGA,KAFH,CAES,MAFT,EAEiBX,KAFjB,EAGGW,KAHH,CAGS,QAHT,EAGmBnB,EAAE,CAACqB,WAAH,EAHnB,EAIGF,KAJH,CAIS,cAJT,EAIyB,GAJzB,CAAd;AAMA,UAAMG,SAAS,GAAGV,GAAG,CAACW,SAAJ,CAAc,MAAd,EACKnB,IADL,CACUI,KADV,EAEKgB,KAFL,GAGKV,MAHL,CAGY,MAHZ,EAIKE,KAJL,CAIW,QAJX,EAIoB,MAJpB,EAKKA,KALL,CAKW,cALX,EAK0B,CAL1B,EAMKS,EANL,CAMQ,WANR,EAMoB,UAASC,CAAT,EAAWC,CAAX,EAAa;AAC3B3B,MAAAA,EAAE,CAACa,MAAH,CAAU,IAAV,EACGG,KADH,CACS,QADT,EACkB,MADlB,EAEGA,KAFH,CAES,cAFT,EAEwB,CAFxB;AAGD,KAVL,EAWKS,EAXL,CAWQ,UAXR,EAWmB,UAASC,CAAT,EAAWC,CAAX,EAAa;AAC1B3B,MAAAA,EAAE,CAACa,MAAH,CAAU,IAAV,EACGG,KADH,CACS,QADT,EACkB,MADlB,EAEGA,KAFH,CAES,cAFT,EAEwB,CAFxB;AAGD,KAfL,CAAlB;AAgBA,UAAMY,KAAK,GAAG5B,EAAE,CAAC6B,UAAjB;AACA,UAAMC,SAAS,GAAGlB,GAAG,CAACW,SAAJ,CAAc,QAAd,EACKnB,IADL,CACUG,KADV,EAEKiB,KAFL,GAGKV,MAHL,CAGY,QAHZ,EAIKC,IAJL,CAIU,GAJV,EAIc,EAJd,EAKKC,KALL,CAKW,MALX,EAKkB,UAASU,CAAT,EAAWC,CAAX,EAAa;AACzB,aAAOC,KAAK,CAACD,CAAD,CAAZ;AACD,KAPL,EAQKI,IARL,CAQUZ,KAAK,CAACa,IARhB,CAAlB,CAnC4B,CA4CN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEtBb,IAAAA,KAAK,CAACM,EAAN,CAAS,MAAT,EAAiB,YAAU;AACzBH,MAAAA,SAAS,CAACP,IAAV,CAAe,IAAf,EAAoB,UAASW,CAAT,EAAW;AAAE,eAAOA,CAAC,CAACO,MAAF,CAASC,CAAhB;AAAoB,OAArD;AACAZ,MAAAA,SAAS,CAACP,IAAV,CAAe,IAAf,EAAoB,UAASW,CAAT,EAAW;AAAE,eAAOA,CAAC,CAACO,MAAF,CAASE,CAAhB;AAAoB,OAArD;AACAb,MAAAA,SAAS,CAACP,IAAV,CAAe,IAAf,EAAoB,UAASW,CAAT,EAAW;AAAE,eAAOA,CAAC,CAACU,MAAF,CAASF,CAAhB;AAAoB,OAArD;AACAZ,MAAAA,SAAS,CAACP,IAAV,CAAe,IAAf,EAAoB,UAASW,CAAT,EAAW;AAAE,eAAOA,CAAC,CAACU,MAAF,CAASD,CAAhB;AAAoB,OAArD;AAEAL,MAAAA,SAAS,CAACf,IAAV,CAAe,IAAf,EAAoB,UAASW,CAAT,EAAW;AAAE,eAAOA,CAAC,CAACQ,CAAT;AAAa,OAA9C;AACAJ,MAAAA,SAAS,CAACf,IAAV,CAAe,IAAf,EAAoB,UAASW,CAAT,EAAW;AAAE,eAAOA,CAAC,CAACS,CAAT;AAAa,OAA9C;AACD,KARD;AASD;;AAEDE,EAAAA,iBAAiB,GAAG;AAClB,SAAK/B,cAAL,CAAoB,KAAKF,IAAL,CAAUkC,UAA9B,EAA0C,KAAKlC,IAAL,CAAUmC,UAApD;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAGD;;AAvFgC;;AA2FnC,eAAevC,WAAf","sourcesContent":["import React,{Component} from \"react\";\nimport * as d3 from 'd3'\n\nclass Force_chart extends Component{\n  constructor(props) {\n    super(props)\n    this.data = props.chartState\n  }\n\n  drawForceChart (nodes, edges) {\n    const padding = this.data.padding\n    const width = this.data.width\n    const pieHeight = this.data.pieHeight\n\n    const svg = d3.select(\"body\")\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", pieHeight)\n      .style('padding-left', padding.left)\n      .style('padding-top', padding.top)\n\n    const force = d3.forceSimulation(nodes)\n                    .force(\"charge\", [-200])\n                    .force(\"link\", edges)\n                    .force(\"center\", d3.forceCenter())\n                    .force('linkDistance', 100)\n\n    const svg_edges = svg.selectAll(\"line\")\n                          .data(edges)\n                          .enter()\n                          .append(\"line\")\n                          .style(\"stroke\",\"#ccc\")\n                          .style(\"stroke-width\",1)\n                          .on(\"mouseover\",function(d,i){\n                            d3.select(this)\n                              .style(\"stroke\",\"grey\")\n                              .style(\"stroke-width\",3)\n                          })\n                          .on(\"mouseout\",function(d,i){\n                            d3.select(this)\n                              .style(\"stroke\",\"#ccc\")\n                              .style(\"stroke-width\",1)\n                          })\n    const color = d3.schemeSet2\n    const svg_nodes = svg.selectAll(\"circle\")\n                          .data(nodes)\n                          .enter()\n                          .append(\"circle\")\n                          .attr(\"r\",10)\n                          .style(\"fill\",function(d,i){\n                            return color[i];\n                          })\n                          .call(force.drag)\n                          // .on('mouseover', d => showDetail(d))\n                          // .on(\"mouseover\",function(d,i){\n                          //   d3.select(this)\n                          //     .attr(\"r\",'20px')\n                          //   d3.select('#tooltip')\n                          //     .classed('hidden', false)\n                          //     .style('left', (d.x - 50))\n                          //     .style('top', (d.y-40))\n                          //     .select('#place').text(d.name)\n                          // })\n                          // // .on('mouseout', d => hideDetail())\n                          // .on('mouseout', d => {\n                          //   d3.select(this)\n                          //     .attr(\"r\",'10px')  //鼠标移出时，设置圆点半径报错\n                          //   d3.select('#tooltip').classed('hidden', true)\n                          //     .select('#place').text()\n                          // })\n\n    force.on(\"tick\", function(){\n      svg_edges.attr(\"x1\",function(d){ return d.source.x; });\n      svg_edges.attr(\"y1\",function(d){ return d.source.y; });\n      svg_edges.attr(\"x2\",function(d){ return d.target.x; });\n      svg_edges.attr(\"y2\",function(d){ return d.target.y; });\n\n      svg_nodes.attr(\"cx\",function(d){ return d.x; });\n      svg_nodes.attr(\"cy\",function(d){ return d.y; });\n    });\n  }\n\n  componentDidMount() {\n    this.drawForceChart(this.data.forceNodes, this.data.forceEdges)\n  }\n\n  render() {\n    return (\n      <div></div>\n    )\n  }\n\n}\n\nexport default Force_chart"]},"metadata":{},"sourceType":"module"}